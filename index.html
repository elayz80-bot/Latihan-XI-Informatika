<!doctype html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz Interaktif Ceria</title>

<!-- CONFETTI LIBRARY -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root{
  --bg: #fff8f3;
  --card: #ffffff;
  --accent1: #ffb3c6;
  --accent2: #ff8fa3;
  --accent3: #9ad0f5;
  --green: #4CAF50;
  --red: #ff5252;
  --shadow: 0 6px 20px rgba(0,0,0,0.08);
  font-family: "Poppins", sans-serif;
}

body{
  margin:0;
  background: linear-gradient(180deg,#fff7f2,#fff0e9);
  min-height:100vh;
  padding:25px;
  display:flex;
  justify-content:center;
}

.wrap{
  width:100%;
  max-width:900px;
  background:var(--card);
  border-radius:18px;
  box-shadow:var(--shadow);
  overflow:hidden;
}

header{
  background:linear-gradient(90deg,#ffe5ec,#ffd1dc);
  padding:20px;
  text-align:center;
  font-size:22px;
  font-weight:800;
}

.main{padding:25px;}

label{font-weight:600;margin-top:10px;display:block;}

input{
  width:100%;
  padding:10px;
  border-radius:10px;
  border:1px solid #eee;
  margin-top:5px;
}

button{
  background:var(--accent2);
  color:white;
  padding:12px 16px;
  border-radius:12px;
  border:none;
  cursor:pointer;
  font-weight:700;
  margin-top:12px;
  transition:0.2s;
  box-shadow:0 6px 10px rgba(255,143,163,0.25);
}
button:hover{
  transform:scale(1.05);
}

button.secondary{
  background:#fff;
  color:#444;
  border:2px dashed #ffc9d6;
  box-shadow:none;
}

.card{
  background:#fff;
  padding:18px;
  margin-top:16px;
  border-radius:14px;
  box-shadow:0 6px 14px rgba(0,0,0,0.06);
}

.question{
  display:none;
}

.question.active{
  display:block;
  animation:fade 0.4s ease;
}

@keyframes fade{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:1;transform:translateY(0);}
}

.choice{
  padding:12px;
  border-radius:12px;
  border:1px solid #eee;
  margin-bottom:8px;
  cursor:pointer;
  transition:0.15s;
}
.choice:hover{
  background:#fff7fa;
}

.choice.selected{background:#fff4ff;border-color:#ffb7e3;}

.correct{background:#e9ffe9 !important;border-color:#5cd65c !important;}
.incorrect{background:#ffe9e9 !important;border-color:#ff6b6b !important;}

.summary{
  display:none;
}

.summary.visible{
  display:block;
}

.scoreBox{
  background:var(--accent3);
  color:white;
  padding:20px;
  border-radius:16px;
  font-size:28px;
  font-weight:800;
  text-align:center;
  margin-bottom:18px;
  animation:pop 0.6s ease;
}

@keyframes pop{
  0%{transform:scale(0.5);opacity:0;}
  100%{transform:scale(1);opacity:1;}
}

.correctLabel{color:var(--green);font-weight:700;}
.incorrectLabel{color:var(--red);font-weight:700;}
</style>
</head>

<body>
<div class="wrap">

<header>
  Quiz Interaktif Ceria ‚ú®
</header>

<div class="main">

<!-- SETUP -->
<div class="card">
  <label>Nama / Kelompok</label>
  <input type="text" id="name" placeholder="Masukkan nama..." />

  <label>Waktu per soal (30‚Äì60 detik)</label>
  <input type="number" id="time" min="30" max="60" value="45" />

  <div style="margin-top:10px;display:flex;align-items:center;gap:8px">
    <input type="checkbox" id="randomTime" />
    <span>Gunakan waktu acak</span>
  </div>

  <button id="startBtn">Mulai Quiz</button>
  <button class="secondary" id="resetBtn">Reset</button>
</div>

<!-- QUIZ AREA -->
<div id="quizArea" class="card"></div>

<!-- SUMMARY -->
<div id="summary" class="summary card">
  <div id="scoreBox" class="scoreBox">Skor: 0%</div>
  <div id="metaInfo" style="font-size:14px;color:#555;margin-bottom:12px"></div>
  <div id="summaryList"></div>
  <button id="downloadBtn">Download Hasil (CSV)</button>
</div>

</div></div>

<script>
// =========================
//  SITUS QUIZ CERIA - CETJI
// =========================

// Daftar soal + kunci
const questions = [
  {q:"Agar objek dapat diubah ukurannya ...", c:["Diputar","Dihapus","Dipilih (resize)","Terkunci","Bentuk khusus"], a:2},
  {q:"Menambah video YouTube ...", c:["Insert ‚Üí Video","Insert ‚Üí Media ‚Üí YouTube","Tools ‚Üí Add Video","Slide ‚Üí Object","Format ‚Üí Link"], a:0},
  {q:"Memulai presentasi dari slide ...", c:["Ctrl+Shift+S","Ctrl+Enter","Ctrl+F5","Shift+F5","Alt+F2"], a:3},
  {q:"Rata tengah ...", c:["Format","Slide","Arrange ‚Üí Align ‚Üí Center","Tools","Auto"], a:2},
  {q:"Transition semua slide ...", c:["Select all ‚Üí Transition","Layout","Transition Manager","Animate all","Editor"], a:0},
  {q:"Chart tidak tersedia ...", c:["Bar","Line","Pie","Scatter","Waterfall"], a:4},
  {q:"Ikon speaker ...", c:["Catatan","Audio disisipkan","Komentar","Rekaman","Suara animasi"], a:1},
  {q:"Duplikasi slide ...", c:["Ctrl+D","Ctrl+Shift+N","Ctrl+Alt+S","Ctrl+L","Alt+D"], a:0},
  {q:"Publish to Web ...", c:["Email","Web otomatis","PDF","Classroom","Ekstensi"], a:1},
  {q:"Laser pointer ...", c:["L","P","Z","Spasi","Ctrl+L"], a:0},
  {q:"Simbol cuaca ...", c:["Dekomp","Abstraksi","Perulangan","Debug","Coding"], a:1},
  {q:"Langkah membuat teh ...", c:["Abstraksi","Pola","Algoritma","Syntax","Variabel"], a:2},
  {q:"Game sederhana ...", c:["Pola","Dekomposisi & Algoritma","Abstraksi","Loop","Input"], a:1},
  {q:"Urutan pembuatan program ...", c:["Cycle","Algoritma","Pengembangan perangkat lunak","Pola","Deklarasi"], a:2},
  {q:"Nilai yang bisa berubah ...", c:["Konstanta","Variabel","Output","Fungsi","Tipe data"], a:1},
  {q:"Input() berfungsi ...", c:["Output","Simpan","Ambil input","Loop","Hitung"], a:2},
  {q:"Pola 2,4,6,8 ...", c:["11","12","13","14","15"], a:1},
  {q:"Aplikasi peta ...", c:["Dekomp","Abstraksi","Iterasi","Algoritma","Banding"], a:1},
  {q:"Hitung luas ...", c:["Fungsi","Pola","Algoritma","Abstraksi","Kondisi"], a:2},
  {q:"Perbaiki error ...", c:["Loop","Dekomp","Debug","Abstraksi","Input"], a:2},
];

let idx = 0;
let answers = [];
let timer=null;
let timeLeft = 0;

// ======================
//  RENDER SOAL
// ======================
function renderQuiz(){
  const area=document.getElementById("quizArea");
  area.innerHTML="";

  const q = questions[idx];

  let html = `<div><b>Soal ${idx+1}/${questions.length}</b></div>`;
  html += `<div style="margin:10px 0">${q.q}</div>`;

  q.c.forEach((t,i)=>{
    html += `<div class="choice" onclick="choose(${i})">${String.fromCharCode(65+i)}. ${t}</div>`;
  });

  html += `<div style="margin-top:10px;color:#999">Waktu tersisa: <b id='timerText'>--</b>s</div>`;
  
  area.innerHTML = html;
}

// ======================
//  PILIH JAWABAN
// ======================
function choose(opt){
  answers[idx]=opt;
  clearInterval(timer);
  setTimeout(()=>next(),300);
}

// ======================
//  TIMER
// ======================
function startTimer(){
  const random = document.getElementById("randomTime").checked;
  const base = parseInt(document.getElementById("time").value || 45);
  timeLeft = random ? Math.floor(Math.random()*31)+30 : base;

  timer=setInterval(()=>{
    timeLeft--;
    document.getElementById("timerText").innerText=timeLeft;
    if(timeLeft<=0){
      clearInterval(timer);
      next();
    }
  },1000);
}

// ======================
//  NEXT SOAL
// ======================
function next(){
  idx++;
  if(idx >= questions.length){
    finish();
    return;
  }
  renderQuiz();
  startTimer();
}

// ======================
//  MULAI
// ======================
document.getElementById("startBtn").onclick=()=>{
  if(!document.getElementById("name").value.trim()){
    alert("Isi nama dulu Elyy üíõ");
    return;
  }
  idx=0;
  answers=[];
  document.getElementById("summary").classList.remove("visible");
  renderQuiz();
  startTimer();
};

// ======================
//  SELESAI
// ======================
function finish(){
  clearInterval(timer);
  const sum = document.getElementById("summary");
  const list = document.getElementById("summaryList");

  list.innerHTML="";

  let benar = 0;

  questions.forEach((q,i)=>{
    let user = answers[i];
    let correct = q.a;
    let status = (user===correct);

    if(status) benar++;

    list.innerHTML += `
      <div class="card" style="margin-bottom:10px">
        <b>${i+1}. ${q.q}</b><br>
        Jawaban Anda: <span class="${status?'correctLabel':'incorrectLabel'}">
          ${user!=null ? q.c[user] : "(Tidak dijawab)"}
        </span><br>
        Jawaban Benar: <span class="correctLabel">${q.c[correct]}</span><br>
        ${status? "‚úîÔ∏è Benar" : "‚ùå Salah"}
      </div>
    `;
  });

  const score = Math.round(benar/questions.length*100);
  animateScore(score);

  document.getElementById("metaInfo").innerText =
    `${document.getElementById("name").value} ¬∑ Benar: ${benar} dari ${questions.length}`;

  sum.classList.add("visible");

  triggerConfetti(score);
}

// ======================
//  ANIMASI SKOR
// ======================
function animateScore(final){
  let n=0;
  const box=document.getElementById("scoreBox");
  let a=setInterval(()=>{
    n++;
    box.innerText=`Skor: ${n}%`;
    if(n>=final) clearInterval(a);
  },10);
}

// ======================
//  CONFETTI
// ======================
function triggerConfetti(score){
  if(score >= 80){
    confetti({particleCount:120,spread:90,startVelocity:35});
    confetti({particleCount:120,spread:90,startVelocity:25,origin:{x:0}});
    confetti({particleCount:120,spread:90,startVelocity:25,origin:{x:1}});
  } else if(score >= 60){
    confetti({particleCount:60,spread:60});
  }
}

// ======================
//  RESET
// ======================
document.getElementById("resetBtn").onclick=()=>location.reload();

// ======================
//  DOWNLOAD CSV
// ======================
document.getElementById("downloadBtn").onclick=()=>{
  let rows=[["Nama",document.getElementById("name").value],["Soal","Jawaban Anda","Jawaban Benar","Status"]];

  questions.forEach((q,i)=>{
    const user=answers[i];
    const correct=q.a;
    rows.push([
      q.q,
      user!=null?q.c[user]:"(Tidak dijawab)",
      q.c[correct],
      user===correct?"Benar":"Salah"
    ]);
  });

  let csv=rows.map(r=>r.join(",")).join("\n");
  let blob=new Blob([csv],{type:"text/csv"});
  let url=URL.createObjectURL(blob);

  let a=document.createElement("a");
  a.href=url;
  a.download="hasil_quiz.csv";
  a.click();
};
</script>
</body>
</html>
